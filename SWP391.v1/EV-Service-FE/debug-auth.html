<!DOCTYPE html>
<html>
<head>
    <title>Debug Auth State</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        pre { background: #f5f5f5; padding: 15px; border-radius: 5px; }
        button { margin: 10px; padding: 10px 20px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>üîç Auth Debug Tool</h1>
    <button onclick="checkAuth()">Check Auth State</button>
    <button onclick="clearAuth()">Clear Auth</button>
    <button onclick="location.reload()">Reload Page</button>
    
    <h2>LocalStorage Contents:</h2>
    <pre id="output"></pre>

    <script>
        function checkAuth() {
            const output = document.getElementById('output');
            
            // Check all relevant keys
            const keys = [
                'ev_auth_token',
                'ev_user_data',
                'ev_auth_state'
            ];
            
            const data = {};
            
            keys.forEach(key => {
                const value = localStorage.getItem(key);
                if (value) {
                    try {
                        // Try to parse as JSON
                        data[key] = JSON.parse(value);
                    } catch {
                        // If not JSON, show raw value
                        data[key] = value;
                    }
                } else {
                    data[key] = '‚ùå NOT FOUND';
                }
            });
            
            output.textContent = JSON.stringify(data, null, 2);
            
            // Show summary
            const token = localStorage.getItem('ev_auth_token');
            const authState = localStorage.getItem('ev_auth_state');
            
            console.log('=== AUTH DEBUG ===');
            console.log('Token exists:', !!token);
            console.log('Token value:', token);
            console.log('Auth state exists:', !!authState);
            console.log('Auth state:', authState);
            console.log('=================');
        }
        
        function clearAuth() {
            if (confirm('Clear all auth data?')) {
                localStorage.removeItem('ev_auth_token');
                localStorage.removeItem('ev_user_data');
                localStorage.removeItem('ev_auth_state');
                alert('Auth data cleared! Now try to login again.');
                checkAuth();
            }
        }
        
        // Auto-check on load
        window.onload = checkAuth;
    </script>
</body>
</html>
